<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="selling.gift.apply">
    <resultMap id="giftApplyGift" type="selling.sunshine.model.gift.GiftApply">
        <result property="applyId" column="gift_apply_id"></result>
        <result property="potential" column="potential"></result>
        <result property="line" column="apply_line"></result>
        <result property="status" column="apply_status"
                typeHandler="selling.sunshine.handler.mybatis.gift.GiftApplyStatusHandler"></result>
        <result property="blockFlag" column="block_flag"></result>
        <result property="createAt" column="create_time"></result>
        <association property="goods" column="goodsId = goods_id"></association>
        <association property="agent" column="agentId = agent_id"></association>
    </resultMap>

    <insert id="insert" parameterType="selling.sunshine.model.gift.GiftApply" useGeneratedKeys="false">
        INSERT INTO gift_apply(gift_apply_id, goods_id, agent_id, potential, apply_line, apply_status, block_flag, create_time)
        VALUES (#{applyId}, #{goods.goodsId}, #{agent.agentId}, #{potential}, #{line}, #{status, typeHandler=org.apache.ibatis.type.EnumOrdinalTypeHandler}, #{blockFlag}, #{createAt})
    </insert>
</mapper>